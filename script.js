const studentData = {
 MCA: [
{ name: "Aashutosh Dwivedi", rollNumber: "22150050001" },
{ name: "Abhay Tripathi", rollNumber: "22150050002" },
{ name: "Aman Malviya", rollNumber: "22150050003" },
{ name: "Anshika Singh", rollNumber: "22150050004" },
{ name: "Anshumaan Singh", rollNumber: "22150050005" },
{ name: "Deepak Saini", rollNumber: "22150050006" },
{ name: "Gaurav Upadhyay", rollNumber: "22150050007" },
{ name: "Himanshu Ranjan", rollNumber: "22150050008" },
{ name: "Mariyam Naseem", rollNumber: "22150050010" },
{ name: "Mohammad Mahin", rollNumber: "22150050011" },
{ name: "Mohammad Sami", rollNumber: "22150050012" },
{ name: "Neeti", rollNumber: "22150050013" },
{ name: "Raj Singh", rollNumber: "22150050014" },
{ name: "Rohit Kumar", rollNumber: "22150050015" },
{ name: "Sakshi Gupta", rollNumber: "22150050016" },
{ name: "Shivam Srivastav", rollNumber: "22150050017" },
{ name: "Sumit Tiwari", rollNumber: "22150050018" },
{ name: "Swapnil", rollNumber: "22150050019" },
{ name: "Tushar Singh", rollNumber: "22150050020" },
{ name: "Vikas Dev Pandey", rollNumber: "22150050022" },
{ name: "Vivek Kumar", rollNumber: "22150050023" },
{ name: "Yash Agrawal", rollNumber: "22150050024" }
],
BCA: [
{ name: "Aashutosh Dwivedi", rollNumber: "22150050001" },
{ name: "Abhay Tripathi", rollNumber: "22150050002" },
{ name: "Aman Malviya", rollNumber: "22150050003" },
{ name: "Anshika Singh", rollNumber: "22150050004" },
{ name: "Anshumaan Singh", rollNumber: "22150050005" },
{ name: "Deepak Saini", rollNumber: "22150050006" },
{ name: "Gaurav Upadhyay", rollNumber: "22150050007" },
{ name: "Himanshu Ranjan", rollNumber: "22150050008" },
{ name: "Mariyam Naseem", rollNumber: "22150050010" },
{ name: "Mohammad Mahin", rollNumber: "22150050011" },
{ name: "Mohammad Sami", rollNumber: "22150050012" },
{ name: "Neeti", rollNumber: "22150050013" },
{ name: "Raj Singh", rollNumber: "22150050014" },
{ name: "Rohit Kumar", rollNumber: "22150050015" },
{ name: "Sakshi Gupta", rollNumber: "22150050016" },
{ name: "Shivam Srivastav", rollNumber: "22150050017" },
{ name: "Sumit Tiwari", rollNumber: "22150050018" },
{ name: "Swapnil", rollNumber: "22150050019" },
{ name: "Tushar Singh", rollNumber: "22150050020" },
{ name: "Vikas Dev Pandey", rollNumber: "22150050022" },
{ name: "Vivek Kumar", rollNumber: "22150050023" },
{ name: "Yash Agrawal", rollNumber: "22150050024" }
],
BBA: [{ name: "Aashutosh Dwivedi", rollNumber: "22150050001" },
{ name: "Abhay Tripathi", rollNumber: "22150050002" },
{ name: "Aman Malviya", rollNumber: "22150050003" },
{ name: "Anshika Singh", rollNumber: "22150050004" },
{ name: "Anshumaan Singh", rollNumber: "22150050005" },
{ name: "Deepak Saini", rollNumber: "22150050006" },
{ name: "Gaurav Upadhyay", rollNumber: "22150050007" },
{ name: "Himanshu Ranjan", rollNumber: "22150050008" },
{ name: "Mariyam Naseem", rollNumber: "22150050010" },
{ name: "Mohammad Mahin", rollNumber: "22150050011" },
{ name: "Mohammad Sami", rollNumber: "22150050012" },
{ name: "Neeti", rollNumber: "22150050013" },
{ name: "Raj Singh", rollNumber: "22150050014" },
{ name: "Rohit Kumar", rollNumber: "22150050015" },
{ name: "Sakshi Gupta", rollNumber: "22150050016" },
{ name: "Shivam Srivastav", rollNumber: "22150050017" },
{ name: "Sumit Tiwari", rollNumber: "22150050018" },
{ name: "Swapnil", rollNumber: "22150050019" },
{ name: "Tushar Singh", rollNumber: "22150050020" },
{ name: "Vikas Dev Pandey", rollNumber: "22150050022" },
{ name: "Vivek Kumar", rollNumber: "22150050023" },
{ name: "Yash Agrawal", rollNumber: "22150050024" }],
BCOM: [{ name: "Aashutosh Dwivedi", rollNumber: "22150050001" },
{ name: "Abhay Tripathi", rollNumber: "22150050002" },
{ name: "Aman Malviya", rollNumber: "22150050003" },
{ name: "Anshika Singh", rollNumber: "22150050004" },
{ name: "Anshumaan Singh", rollNumber: "22150050005" },
{ name: "Deepak Saini", rollNumber: "22150050006" },
{ name: "Gaurav Upadhyay", rollNumber: "22150050007" },
{ name: "Himanshu Ranjan", rollNumber: "22150050008" },
{ name: "Mariyam Naseem", rollNumber: "22150050010" },
{ name: "Mohammad Mahin", rollNumber: "22150050011" },
{ name: "Mohammad Sami", rollNumber: "22150050012" },
{ name: "Neeti", rollNumber: "22150050013" },
{ name: "Raj Singh", rollNumber: "22150050014" },
{ name: "Rohit Kumar", rollNumber: "22150050015" },
{ name: "Sakshi Gupta", rollNumber: "22150050016" },
{ name: "Shivam Srivastav", rollNumber: "22150050017" },
{ name: "Sumit Tiwari", rollNumber: "22150050018" },
{ name: "Swapnil", rollNumber: "22150050019" },
{ name: "Tushar Singh", rollNumber: "22150050020" },
{ name: "Vikas Dev Pandey", rollNumber: "22150050022" },
{ name: "Vivek Kumar", rollNumber: "22150050023" },
{ name: "Yash Agrawal", rollNumber: "22150050024" }],
BTECH: [{ name: "Aashutosh Dwivedi", rollNumber: "22150050001" },
{ name: "Abhay Tripathi", rollNumber: "22150050002" },
{ name: "Aman Malviya", rollNumber: "22150050003" },
{ name: "Anshika Singh", rollNumber: "22150050004" },
{ name: "Anshumaan Singh", rollNumber: "22150050005" },
{ name: "Deepak Saini", rollNumber: "22150050006" },
{ name: "Gaurav Upadhyay", rollNumber: "22150050007" },
{ name: "Himanshu Ranjan", rollNumber: "22150050008" },
{ name: "Mariyam Naseem", rollNumber: "22150050010" },
{ name: "Mohammad Mahin", rollNumber: "22150050011" },
{ name: "Mohammad Sami", rollNumber: "22150050012" },
{ name: "Neeti", rollNumber: "22150050013" },
{ name: "Raj Singh", rollNumber: "22150050014" },
{ name: "Rohit Kumar", rollNumber: "22150050015" },
{ name: "Sakshi Gupta", rollNumber: "22150050016" },
{ name: "Shivam Srivastav", rollNumber: "22150050017" },
{ name: "Sumit Tiwari", rollNumber: "22150050018" },
{ name: "Swapnil", rollNumber: "22150050019" },
{ name: "Tushar Singh", rollNumber: "22150050020" },
{ name: "Vikas Dev Pandey", rollNumber: "22150050022" },
{ name: "Vivek Kumar", rollNumber: "22150050023" },
{ name: "Yash Agrawal", rollNumber: "22150050024" }]
};

const attendanceData = JSON.parse(localStorage.getItem("attendanceData")) || {
  MCA: [],
  BCA: [],
  BBA: [],
  BCOM: [],
  BTECH: []
};
// Function to handle login and display the correct dashboard
function handleLogin() {
    const role = document.getElementById("role-input").value.toLowerCase();
    document.getElementById("role-selection-panel").style.display = "none";
  
    if (role === "student") {
      document.getElementById("student-dashboard").style.display = "block";
    } else if (role === "admin") {
      document.getElementById("admin-dashboard").style.display = "block";
      showAdminList(); // Show empty list initially
    } else {
      alert("Invalid role!");
      document.getElementById("role-selection-panel").style.display = "block";
    }
  }
  
  // Function to display the list of students based on the selected branch
  function showStudentList() {
    const branch = document.getElementById("branch-select").value;
    const studentList = document.getElementById("student-list");
    studentList.innerHTML = "";
  
    if (branch && studentData[branch]) {
      const ul = document.createElement("ul");
      studentData[branch].forEach((student, index) => {
        if (!attendanceData[branch].some(att => att.rollNumber === student.rollNumber)) {
          const li = document.createElement("li");
          li.innerHTML = `
            <span>${student.name} (${student.rollNumber})</span>
            <div class="attendance" style='display:flex; gap-5px'>
              <button class="attending-btn" onclick="markAttendance('${branch}', '${index}', '${student.rollNumber}', 'Attending')">Attending</button>
              <button class="not-attending-btn" onclick="markAttendance('${branch}', '${index}', '${student.rollNumber}', 'Not Attending')">Not Attending</button>
            </div>
          `;
          ul.appendChild(li);
        }
      });
      studentList.appendChild(ul);
    }
  }
  
  // Function to mark attendance
  function markAttendance(branch, studentIndex, rollNumber, status) {
    attendanceData[branch].push({ name: studentData[branch][studentIndex].name, rollNumber, attendance: status });
    localStorage.setItem("attendanceData", JSON.stringify(attendanceData));
  
    // Update student list and admin list
    showStudentList();
    showAdminList();
  }
  
  // Function to display attendance data in the admin dashboard
  function showAdminList() {
    const branch = document.getElementById("admin-branch-select").value;
    const adminList = document.getElementById("admin-list");
    adminList.innerHTML = ""; // Clear the existing list
  
    if (branch && attendanceData[branch]) {
      const ul = document.createElement("ul");
  
      // Filter out undefined or null attendance data
      const validAttendance = attendanceData[branch].filter(att => att.name && att.attendance !== null && att.attendance !== undefined);
  
      if (validAttendance.length > 0) {
        validAttendance.forEach((att) => {
          const li = document.createElement("li");
          li.innerHTML = `
            <span>${att.name} (${att.rollNumber}) - ${att.attendance}</span>
          `;
          ul.appendChild(li);
        });
        adminList.appendChild(ul);
      } else {
        adminList.innerHTML = "<p>No attendance data available.</p>";
      }
    }
  }